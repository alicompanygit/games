(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".modal-container{position:fixed;left:0;top:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;background-color:#3e3e3e21;cursor:pointer}.modal-item{cursor:default}.modal-list-enter-active,.modal-list-leave-active,.modal-list-enter-active .modal-item,.modal-list-leave-active .modal-item{transition:all .2s ease}.modal-list-enter-from,.modal-list-leave-to{opacity:0!important}.modal-list-enter-from .modal-item,.modal-list-leave-to .modal-item{transform:translateY(-60px)}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(s,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],c):(s=typeof globalThis<"u"?globalThis:s||self,c(s.JenesiusVueModal={},s.Vue))})(this,function(s,c){"use strict";/*!
  * jenesius-vue-modal v1.11.1
  * (c) 2024 Jenesius
  * @license MIT
  */var E=function(t,e){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},E(t,e)};function F(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");E(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function p(t,e,n,o){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function l(h){try{u(o.next(h))}catch(S){a(S)}}function f(h){try{u(o.throw(h))}catch(S){a(S)}}function u(h){h.done?r(h.value):i(h.value).then(l,f)}u((o=o.apply(t,e||[])).next())})}function g(t,e){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},o,i,r,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(h){return f([u,h])}}function f(u){if(o)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(o=1,i&&(r=u[0]&2?i.return:u[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,u[1])).done)return r;switch(i=0,r&&(u=[u[0]&2,r.value]),u[0]){case 0:case 1:r=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){n.label=u[1];break}if(u[0]===6&&n.label<r[1]){n.label=r[1],r=u;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(u);break}r[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(h){u=[6,h],i=0}finally{o=r=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}typeof SuppressedError=="function"&&SuppressedError;var d=function(t){F(e,t);function e(n,o){o===void 0&&(o=null);var i=t.call(this)||this;return i.isModalError=!0,i.message=n,i.details=o,i}return e.Undefined=function(n){return new e("Modal with id: ".concat(n," not founded. The modal window may have been closed earlier."))},e.UndefinedGuardName=function(n){return new e("Guard's name ".concat(n," is not declaration."))},e.NextReject=function(n){return new e("Guard returned false. Modal navigation was stopped. Modal id ".concat(n))},e.GuardDeclarationType=function(n){return new e("Guard's type should be a function. Provided:",n)},e.ConfigurationType=function(n){return new e("Configuration type must be an Object. Provided",n)},e.ConfigurationUndefinedParam=function(n,o){return new e("In configuration founded unknown parameter: ".concat(n,". Available are ").concat(o.join(", ")," "))},e.QueueNoEmpty=function(){return new e("Modal's queue is not empty. Probably some modal reject closing by onClose hook.")},e.EmptyModalQueue=function(){return new e("Modal queue is empty.")},e.NotInitialized=function(n){return new e("Modal Container not found. Put container from jenesius-vue-modal in App's template. Namespace: ".concat(n,". Check documentation for more information https://modal.jenesius.com/docs.html/installation#getting-started."))},e.ModalComponentNotProvided=function(){return new e("The first parameter(VueComponent) was not specified.")},e.DuplicatedRouterIntegration=function(){return new e("useModalRouter.init should escaped only once.")},e.ModalRouterIntegrationNotInitialized=function(){return new e("The integration was not initialized. Please, use useModalRouter.init(router). For more information: https://modal.jenesius.com/docs.html/integration-vue-router#installation")},e.ModalEventNameMustBeString=function(n){return new e("Event name must be a string. Provided: ".concat(n))},e.ModalNotFoundByID=function(n){return new e("Modal with ID ".concat(n," was not found."))},e.ModalNotExistsInStore=function(n){return new e("Provided name(".concat(n,") don't exist in the store. Has the given name been added to the store?"))},e}(Error),_=function(){function t(){this.state=new Map,t.instance=this}return t.prototype.getByName=function(e){return e===void 0&&(e=t.DEFAULT_NAMESPACE),this.state.has(e)||this.state.set(e,{queue:c.reactive([]),initialized:!1}),this.state.get(e)},t.prototype.forceClean=function(){this.state.forEach(function(e){e.queue.splice(0,e.queue.length)})},t.DEFAULT_NAMESPACE="default",t}(),k=function(){var t=new _,e={scrollLock:!0,animation:"modal-list",backgroundClose:!0,escClose:!0,store:{},skipInitCheck:!1},n=t.getByName().queue;return c.watch(function(){return n},function(){e.scrollLock&&(n.length?document.body.style.overflowY="hidden":document.body.style.overflowY="auto")},{deep:!0}),{namespaceStore:t,configuration:e}}();function m(t){return k.namespaceStore.getByName(t)}var y=k.configuration;function N(t){var e={backgroundClose:y.backgroundClose,isRoute:!1,namespace:_.DEFAULT_NAMESPACE};return t.backgroundClose!==void 0&&(e.backgroundClose=t.backgroundClose),t.isRoute&&(e.isRoute=t.isRoute),t.namespace&&(e.namespace=t.namespace),e}function T(t){t===void 0&&(t={});var e={background:!1,esc:!1};return Object.assign(e,t)}function R(t){return t||(t={}),t}function b(t,e){e===void 0&&(e={});var n=M.STORE.get(t);if(!n)return Promise.reject(d.ModalNotFoundByID(t));var o=m(n.namespace),i=o.queue.findIndex(function(a){return a.id===t});if(i===-1)return Promise.reject(d.Undefined(t));var r=v.get(t,"close").map(function(a){return G(a,t,T(e))});return O(r).then(function(){o.queue.splice(i,1)}).then(function(){v.get(t,"destroy").forEach(function(a){return a(T(e))})}).then(function(){v.delete(t)})}var M=function(){function t(e,n,o){var i=this;this.events=c.reactive({}),this.backgroundClose=!0,this.isRoute=!1,this.id=t.modalId++,this.component=e,this.props=c.ref(n),this.closed=c.computed(function(){return!m(o.namespace).queue.includes(i)}),e.beforeModalClose&&v.add(this.id,"close",e.beforeModalClose);var r=N(o);this.backgroundClose=r.backgroundClose,this.isRoute=r.isRoute,this.namespace=r.namespace,t.STORE.set(this.id,this)}return t.prototype.close=function(){return b(this.id)},Object.defineProperty(t.prototype,"onclose",{set:function(e){v.add(this.id,"close",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ondestroy",{set:function(e){v.add(this.id,"destroy",e)},enumerable:!1,configurable:!0}),t.prototype.on=function(e,n){var o=this;return Array.isArray(this.events[e])||(this.events[e]=[]),this.events[e].push(n),function(){var i=o.events[e].indexOf(n);i!==-1&&o.events[e].splice(i,1)}},t.STORE=new Map,t.modalId=0,t.EVENT_PROMPT="jenesius-vue-modal:____P____R____O____M____P____T",t}();function I(t){return M.STORE.get(t)}var z={store:{},add:function(t,e,n){var o,i;if(typeof n!="function")throw d.GuardDeclarationType(n);this.store[t]||(this.store[t]=(o={},o[e]=[],o)),this.store[t][e]||(this.store[t][e]=[]),(i=this.store[t][e])===null||i===void 0||i.push(n)},get:function(t,e){return t in this.store?e in this.store[t]?this.store[t][e]||[]:[]:[]},delete:function(t){t in this.store&&delete this.store[t]}};const v=z;function O(t){return t.reduce(function(e,n){return e.then(function(){return n()})},Promise.resolve())}function G(t,e,n){return function(){return new Promise(function(o,i){var r,a=function(l){l===void 0&&(l=!0),l===!1&&i(d.NextReject(e)),o()};Promise.resolve(t.call((r=I(e))===null||r===void 0?void 0:r.instance,n)).then(a).catch(function(l){return i(l)})})}}function A(t){return t=R(t),O(m(t.namespace).queue.map(function(e){return function(){return e.close()}}))}function C(t){var e=m(t),n=e.queue;if(n.length!==0)return n[n.length-1]}function Q(t){t=R(t);var e=C(t.namespace);return e?e.close():Promise.resolve()}function U(t,e,n){var o=N(n),i=m(o.namespace);if(o.namespace===_.DEFAULT_NAMESPACE&&!i.initialized&&!y.skipInitCheck)throw d.NotInitialized(o.namespace);if(typeof t=="string"){var r=B(t);if(!r)throw d.ModalNotExistsInStore(t);t=r}if(!t)throw d.ModalComponentNotProvided();var a=new M(t,e,o);return i.queue.push(c.markRaw(a)),a}function P(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),Promise.resolve().then(function(){return U(t,e,n)})}function j(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),A({namespace:n.namespace}).then(function(){var o=m(n.namespace);if(o.queue.length)throw d.QueueNoEmpty()}).then(function(){return P(t,e,n)})}function x(t){if(typeof t!="object")throw d.ConfigurationType(t);Object.assign(y,t)}function L(t){var e,n,o,i=c.getCurrentInstance(),r=String(((e=i==null?void 0:i.props)===null||e===void 0?void 0:e.modalId)||((n=i==null?void 0:i.props)===null||n===void 0?void 0:n["modal-id"])||((o=i==null?void 0:i.attrs)===null||o===void 0?void 0:o.modalId)),a=r.replace(/[^0-9]/g,"");v.add(Number(a),"close",t)}function V(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),p(this,void 0,void 0,function(){var o,i,r=this;return g(this,function(a){switch(a.label){case 0:return[4,P(t,e,n)];case 1:return o=a.sent(),i=!1,[2,new Promise(function(l){o.on(M.EVENT_PROMPT,function(f){return p(r,void 0,void 0,function(){return g(this,function(u){return i=!0,[2,o.close().then(function(){return l(f)}).catch(function(){return i=!1})]})})}),o.ondestroy=function(){i||l(null)}})]}})})}function B(t){return y.store[t]||void 0}const X="",W=["onPointerdown"],q={__name:"WidgetModalContainerItem",props:{id:Number},setup(t){const e=c.ref(null),o=I(t.id);function i(){if(o.backgroundClose)return b(o.id,{background:!0}).catch(()=>{})}return c.watch(()=>e.value,r=>{o.instance=r}),(r,a)=>(c.openBlock(),c.createElementBlock("div",{class:"widget__modal-container__item modal-container",onPointerdown:c.withModifiers(i,["self","stop"])},[(c.openBlock(),c.createBlock(c.resolveDynamicComponent(c.unref(o).component),c.mergeProps(c.unref(o).props.value,{class:"modal-item widget__modal-wrap",modalId:`_modal_${t.id}`,ref_key:"modalRef",ref:e},c.toHandlers(c.unref(o).events)),null,16,["modalId"]))],40,W))}};function $(t){t===void 0&&(t=_.DEFAULT_NAMESPACE);var e=_.instance.getByName(t);e.initialized=!0,t===_.DEFAULT_NAMESPACE&&document.addEventListener("keyup",function(n){if(y.escClose&&(n.key==="Escape"||n.code==="Escape")){var o=C(t);if(!o)return;b(o.id,{esc:!0}).catch(function(){})}})}const Z="",H={props:{namespace:String},setup(t){return c.onMounted(()=>{$(t.namespace)}),()=>{const e=m(t.namespace);return c.h(c.TransitionGroup,{name:y.animation,tag:"div"},{default:()=>e.queue.map(n=>c.h(q,{key:n.id,id:n.id}))})}},components:{WidgetContainerModalItem:q}};var w={router:null};function Y(t){var e=this;if(w.router)throw d.DuplicatedRouterIntegration();w.router=t;function n(o){for(var i=o.matched.length-1;i>=0;i--){var r=o.matched[i].components,a=Object.values(r).find(function(l){return l._isModal});if(a)return a}return null}t.beforeEach(function(o,i){return p(e,void 0,void 0,function(){var r,a,l;return g(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),r=n(i),r&&!(!((l=(a=r.getModalObject())===null||a===void 0?void 0:a.closed)===null||l===void 0)&&l.value)?[4,r.close(!0)]:[3,2];case 1:f.sent(),f.label=2;case 2:return[3,4];case 3:return f.sent(),[2,!1];case 4:return[2]}})})}),t.afterEach(function(o){return p(e,void 0,void 0,function(){var i;return g(this,function(r){switch(r.label){case 0:return i=n(o),i?[4,i.initialize()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})})}function D(t){var e=null,n=!1;function o(){return p(this,void 0,void 0,function(){return g(this,function(i){switch(i.label){case 0:if(!w.router)throw d.ModalRouterIntegrationNotInitialized();return n=!1,e=null,[4,j(t,c.computed(function(){var r;return(r=w.router)===null||r===void 0?void 0:r.currentRoute.value.params}),{isRoute:!0})];case 1:return e=i.sent(),e.onclose=function(){var r;n||(r=w.router)===null||r===void 0||r.back()},[2]}})})}return{getModalObject:function(){return e},_isModal:!0,close:function(i){return i===void 0&&(i=!1),p(this,void 0,void 0,function(){return g(this,function(r){switch(r.label){case 0:return n=i,e?[4,e.close()]:[3,2];case 1:return[2,r.sent()];case 2:return[2]}})})},initialize:o,setup:function(){return function(){return null}}}}D.init=Y;var J=m().queue;function K(t){return m(t).queue}s.Modal=M,s.closeById=b,s.closeModal=A,s.config=x,s.container=H,s.getComponentFromStore=B,s.getCurrentModal=C,s.getQueueByNamespace=K,s.modalQueue=J,s.onBeforeModalClose=L,s.openModal=j,s.popModal=Q,s.promptModal=V,s.pushModal=P,s.useModalRouter=D,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=jenesius-vue-modal.umd.js.map
